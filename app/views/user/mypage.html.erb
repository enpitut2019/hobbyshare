<html>
<body>
  <!-- Header -->
  <header class="bg-info py-5 mb-5">
    <div class="container h-100">
      <div class="row h-100 align-items-center">
        <div class="col-lg-12">
          <h1 class="display-4 text-white mt-5 mb-2">ここは<%= @user_name %>さんのマイページです</h1>
          <p class="text-white">ここではこのグループで使用する趣味や名前の設定ができます。</p>
        </div>
      </div>
    </div>
  </header>

  <div class="container">

    <div class="row">
      <div class="col-md-8 mb-5">

        <h3>所属グループ:<%= @group_name %></h3>
        <button class="btn btn-primary btn" type="button" onclick="location.href='/group/<%= @gid %>/list'">グループメンバーリスト</button>
        <button class="btn btn-primary btn" type="button" onclick="location.href='/user/show/<%=@user_id%>/<%=@gid%>'">趣味の共有</button>

        <hr>
        <h4>趣味の登録</h4>
        <p>ここで共有したい趣味を登録することができます。</p>
        <%= form_tag("/user/newhobby") do %>
        <input name="hobby_name" required>
        <input type="hidden" name="user_id" value="<%= @user_id %>">
        <input class="btn btn-primary btn-bg" type="submit" value="趣味を登録">
        <% end %>
        <br>

        <!-- ここにユーザが登録してある趣味を全て表示する -->
        <% @users_hobbies.each do |hname| %>
        <ul class="list-inline mt-2">
          <li class="list-inline-item">
            <%= "#{hname.hobby_name}" %>
          </li>
          <!-- 趣味の削除ボタン -->
          <li class="list-inline-item">
            <%= form_tag("/user/hobby_delete") do %>
            <input type="hidden" name="user_id" value="<%= @user_id %>">
            <input type="hidden" name="hobby_id" value="<%= hname.id %>">
            <input class="btn btn-primary btn-sm" type="submit" value="削除" onclick="return subcheck()">
          </li>
          <% end %>
          <% end %>
          <p><br>共有したい趣味が思いつかない場合は、下のメニューから自分の趣味と合うものを選んでください。</p>

        <p>グループごと設定されたおすすめの趣味を追加できます</p>

          <!-- プルダウンメニューで人(user.nameを表示)を選択させて、選択された人のIDを/user/show/にpostで送信-->
          <%= form_tag("/user/newhobby") do %>
          <select name="hobby_name"required>
            <option value="">おすすめ趣味一覧</option>
            <% @dummy_hobbies.each do |hname| %>
            <option value="<%= "#{hname.hobby_name}" %>"><%= "#{hname.hobby_name}" %></option>
            <% end %>
          </select>
          <input type="hidden" name="user_id" value="<%= @user_id %>">
          <input class="btn btn-primary btn-sm" type="submit" value="登録">
          <% end %>

          <hr>

          <!-- ユーザー名の変更 -->
          <h4>ユーザー名の設定</h4>
          <p>ここではユーザ名を変更することができます。</p>
          <%= form_tag("/user/name_change") do %>
          <input name="user_name" class="form-control" required>
          <input type="hidden" name="user_id" value="<%= @user_id %>">
          <input class="btn btn-primary btn-bg" type="submit" value="名前を変更する">
          <% end %>

          <hr>

          <!--ユーザーの削除 -->
          <h4>ユーザーの削除</h4>
          <%= form_tag("/user/#{@user_id}/delete") do %>
          <p>このユーザーを削除する場合はこちら</p>
          <input class="btn btn-primary btn-bg" type="submit" value="ユーザー削除">
          <% end %>
        </div>
      </div>
    </div>
  </body>
  </html>
