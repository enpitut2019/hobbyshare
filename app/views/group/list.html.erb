<!DOCTYPE html>
<html lang="ja">
<script type="text/javascript">
	function subcheck() {
		if (window.confirm('本当に削除しますか')) {
			return true;
		} else {
      window.alert('キャンセルされました'); // 警告ダイアログを表示
		  return false; // 送信を中止
		}
	}
</script>
<!-- Header -->
<header class="bg-primary py-5 mb-5">
  <div class="container h-100">
    <div class="row h-100 align-items-center">
      <div class="col-lg-12">
        <h1 class="display-4 text-white mt-5 mb-2">グループメンバー一覧</h1>
      </div>
    </div>
  </div>
</header>
<div class="container">
    <!-- セッションのアカウントIDを確認して、あるかないかで分岐 -->
    <% if @login_uid == nil %>
    <h3>まだグループに参加してない人はここからメンバー追加</h3>
    <button class="btn btn-primary btn-lg" type="button"onclick="location.href='/group/<%=@gid%>/add_member'">グループに参加</button>
    <% else %>
    <%= @login_uname %>としてこのグループに参加しています
    <br>
    <button class="btn btn-primary btn-lg" type="button"onclick="location.href='/user/mypage/<%=@login_uid%>'">マイページ</button>
    <button class="btn btn-primary btn-lg" type="button"onclick="location.href='/user/show/<%=@login_uid%>/<%=@gid%>'">趣味を共有</button>
    <% end %>
    <hr>
  <div class="row">
    <div class="col-md-8 mb-5">
      <h4><%= Group.find(@gid).group_name %>に所属しているメンバー</h4>
    <ol>
      <% @query_guser.each do |user| %>
      <li>
        <%= user.name %>
        <%= form_tag("/user/#{user.id}/delete") do %>
          <input type="submit" value="削除" class="btn btn-primary btn-sm" type="button" onclick="return subcheck()">
        <% end %>
      </li>
      <% end %>
    </ol>
    </div>
  </div>
  <hr>
  グループのおすすめ趣味
  <br>
  グループごとにおすすめの趣味を設定できます
  <%= form_tag("/user/dummy_newhobby") do %>
  <input name="hobby_name" class="form-control" required>
  <input type="hidden" name="user_id" value="<%= Group.find(@gid).dummyuser %>">
  <input type="hidden" name="group_id" value="<%= @gid %>">
  <input class="btn btn-primary btn-bg" type="submit" value="趣味を登録">
  <input class="btn btn-primary btn-bg" type="reset" value="リセット">
  <% end %>
  <hr>
  <% @dummy_hobbies.reverse_each do |hname| %>
  <tr>
    <td>
      <%= "#{hname.hobby_name}" %>
    </td>
    <!-- 趣味の削除ボタン -->
    <td>
      <%= form_tag("/user/dummyhobby_delete") do %>
      <input type="hidden" name="user_id" value="<%= Group.find(@gid).dummyuser %>">
      <input type="hidden" name="hobby_id" value="<%= hname.id %>">
      <input type="hidden" name="group_id" value="<%= @gid %>">
      <input class="btn btn-primary btn-sm" type="submit" value="削除" onclick="return subcheck()">
    </td>
    <% end %>
  </tr>
  <% end %>
  <hr>
<br>
</div>
